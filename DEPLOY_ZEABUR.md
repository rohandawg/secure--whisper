# Deploy SecureChat to Zeabur

## Why Zeabur?
✅ Full-stack deployment in one platform
✅ Automatic HTTPS & custom domain
✅ Built-in MongoDB support
✅ WebSocket support
✅ Easy configuration
✅ Free tier available

## Quick Deploy Steps

### 1. Push to GitHub (if not already)
```bash
git push origin main
```

### 2. Deploy on Zeabur

**Go to: https://zeabur.com**

1. **Sign up** with GitHub account
2. Click **"Import GitHub Repo"**
3. Search and select: `rohandawg/secure--whisper`
4. Click **"Deploy"**

### 3. Zeabur Auto-Configuration

Zeabur will automatically:
- Detect `zeabur.yaml` configuration
- Create two services: frontend + backend
- Create MongoDB database
- Configure environment variables
- Generate JWT_SECRET and ENCRYPTION_KEY
- Link frontend to backend URL

### 4. Configure Environment Variables (Optional)

If needed, manually set in Zeabur dashboard:

#### Backend Service:
```
JWT_SECRET=<auto-generated>
ENCRYPTION_KEY=<auto-generated>
PORT=4000
MONGODB_URI=<from-database>
```

#### Frontend Service:
```
VITE_API_URL=<backend-url>
```

### 5. Deploy

Click **"Deploy"** and wait:
- Backend deploys first (~3-5 minutes)
- Frontend deploys after (~2-3 minutes)
- Database is created automatically

### 6. Get Your URLs

After deployment, Zeabur will provide:
- **Frontend**: `https://securechat-frontend.zeabur.app`
- **Backend**: `https://securechat-backend.zeabur.app`

## Manual Configuration (if needed)

If `zeabur.yaml` doesn't work automatically:

### Backend Setup
1. In Zeabur project, click **"Add Service"**
2. Select **"GitHub"**
3. Choose your repo and set:
   - **Root Directory**: `server`
   - **Build Command**: `npm install`
   - **Start Command**: `node index.js`
4. Add MongoDB database
5. Connect to database
6. Add environment variables

### Frontend Setup
1. Click **"Add Service"** again
2. Select **"GitHub"**
3. Choose your repo and set:
   - **Root Directory**: `.` (root)
   - **Build Command**: `npm install && npm run build`
   - **Start Command**: `npx serve -s dist`
4. Add environment variable:
   - `VITE_API_URL`: Your backend URL

### MongoDB Setup
1. Click **"Add Database"**
2. Select **"MongoDB"**
3. Plan: Free tier
4. Copy connection string to backend environment

## Environment Variables

### Generate Secrets (PowerShell)

For **JWT_SECRET** (40 characters):
```powershell
-join ((65..90) + (97..122) + (48..57) | Get-Random -Count 40 | ForEach-Object {[char]$_})
```

For **ENCRYPTION_KEY** (32 characters):
```powershell
-join ((65..90) + (97..122) + (48..57) | Get-Random -Count 32 | ForEach-Object {[char]$_})
```

Or use: https://randomkeygen.com

### Backend Variables
- `JWT_SECRET` - Random 40 char string
- `ENCRYPTION_KEY` - Random 32 char string  
- `PORT` - `4000`
- `MONGODB_URI` - MongoDB connection string

### Frontend Variables
- `VITE_API_URL` - Your backend URL (e.g., `https://securechat-backend.zeabur.app`)

## Post-Deployment Checklist

✅ Backend health check: `https://your-backend.zeabur.app/api/health`
✅ Frontend loads without errors
✅ User can register/login
✅ WebSocket connections work
✅ Real-time messaging works
✅ Messages persist in MongoDB

## Troubleshooting

### Build Fails
- Check build logs in Zeabur dashboard
- Verify Node.js version (18+)
- Check npm install succeeds

### Backend Not Connecting
- Verify MONGODB_URI is correct
- Check MongoDB is running
- View backend logs for errors

### WebSocket Not Working
- Zeabur supports WebSockets
- Check browser console for connection errors
- Verify WS URL uses `wss://` in production

### CORS Errors
- Backend CORS is configured
- Verify VITE_API_URL points to correct backend
- Check browser DevTools network tab

## Zeabur Pricing

- **Free Tier**: Limited resources, good for testing
- **Starter**: $9/month per service
- **Pro**: Custom pricing

## Update Deployment

To update after code changes:
```bash
git add .
git commit -m "Update code"
git push origin main
```

Zeabur will automatically redeploy!

## Support

- Zeabur Dashboard: https://zeabur.com
- Zeabur Docs: https://zeabur.com/docs
- Check logs in Zeabur dashboard

## Alternative: Railway

If Zeabur doesn't work, try Railway:
- See `DEPLOY_RAILWAY.md` for instructions
- Railway has similar features
- Often more reliable for WebSockets

