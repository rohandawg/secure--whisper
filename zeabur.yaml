# Zeabur deployment configuration

builds:
  - src: .
    dist: ./dist
    commands:
      - npm install
      - npm run build
    name: securechat-frontend
  
  - src: ./server
    dist: .
    commands:
      - npm install
    name: securechat-backend
    run: node index.js

environments:
  - key: NODE_ENV
    value: production
  
  - key: MONGODB_URI
    fromDatabase: securechat-db
    property: url
  
  - key: JWT_SECRET
    generateValue: true
  
  - key: ENCRYPTION_KEY
    generateValue: true
  
  - key: PORT
    value: "4000"
  
  - key: VITE_API_URL
    fromService: securechat-backend
    property: url

databases:
  - name: securechat-db
    type: mongodb
    plan: free

